# 跨期套利策略简介

from https://blog.csdn.net/myquant/article/details/80606687

https://www.joinquant.com/post/1810?f=xq

https://www.jianshu.com/p/1658f319bfdc


## 什么是跨期套利？

​ 跨期套利是套利交易中最普遍的一种，是股指期货的跨期套利（Calendar Spread Arbitrage）即为在同一交易所进行同一指数、但不同交割月份的套利活动。

​ 跨期套利是利用同一商品但不同交割月份之间正常价格差距出现异常变化时进行对冲而获利的，又可分为牛市套利（bull spread）和熊市套利（bear spread）两种形式。例如在进行金属牛市套利时，交易所买入近期交割月份的金属合约，同时卖出远期交割月份的金属合约，希望近期合约价格上涨幅度大于远期合约价格的上帐幅度；而熊市套利则相反，即卖出近期交割月份合约，买入远期交割月份合约，并期望远期合约价格下跌幅度小于近期合约的价格下跌幅度。

## 什么是价差套利？

​ 价差套利的前提是做出商品期货品种间同一月份的价格之间的价差，并且画出价差的时间序列图，分析价差，寻找合理的价差范围，超出合理的价差变动范围时如何进行操作。

# 协整性检验


## 什么是平稳性？

​ 提到协整性，就不得不提平稳性。在数学中，平稳随机过程（Stationary random process）或者严平稳随机过程（Strictly-sense stationary random process），又称狭义平稳过程，是在固定时间和位置的概率分布与所有时间和位置的概率分布相同的随机过程：即随机过程的统计特性不随时间的推移而变化。这样，数学期望和方差这些参数也不随时间和位置变化。平稳在理论上有严平稳和宽平稳两种，在实际应用上宽平稳使用较多。
 平稳性（stationarity）是一个序列在时间推移中保持稳定不变的性质，或许您对于上图的“价差平稳”不认可，我们将价差做了一阶差分，可以看出，它始终是围绕着一个长期均值（0）在波动。
 
## 什么是整性？

​ 如果某一非平稳序列X_t能够经过d次差分后变成平稳序列，就称该序列为d阶整性，也成为单整，记为X_t \sim I(d)。

## 什么是协整性？

​ 协整性是指若两个或多个非平稳的变量序列，其某个线性组合后的序列呈平稳性。
 协整概念是一个强有力的概念。因为协整允许我们刻画两个或多个序列之间的平衡或平稳关系。对于每一个序列单独来说可能是非平稳的，这些序列的矩，如均值、方差或协方差随时间而变化，而这些时间序列的线性组合序列却可能有不随时间变化的性质。
 
 
# 跨期套利策略实现（基于掘金量化平台）

## 策略思想

首先获取套利（RB1801，RB1805）标的价格序列。

根据EG两步法(1、序列同阶单整 2、OLS残差平稳)判断序列具有协整关系之后(若无协整关系则全平仓位不进行操作)。

通过计算两个真实价格序列回归残差的1.5个标准差上下轨,并在价差突破上轨的时候做空价差,价差突破下轨的时候做多价差并在回归至标准差水平内的时候平仓。


# BOLL指标(布林线指标)

from https://wiki.mbalib.com/wiki/%E5%B8%83%E6%9E%97%E7%BA%BF%E6%8C%87%E6%A0%87

BOLL指标是美国股市分析家约翰·布林根据统计学中的标准差原理设计出来的一种非常简单实用的技术分析指标。一般而言，股价的运动总是围绕某一价值中枢（如均线、成本线等）在一定的范围内变动，布林线指标指标正是在上述条件的基础上，引进了“股价通道”的概念，其认为股价通道的宽窄随着股价波动幅度的大小而变化，而且股价通道又具有变异性，它会随着股价的变化而自动调整。正是由于它具有灵活性、直观性和趋势性的特点，BOLL指标渐渐成为投资者广为应用的市场上热门指标。

在所有的指标计算中，BOLL指标的计算方法是最复杂的之一，其中引进了统计学中的标准差概念，涉及到中轨线（MB）、上轨线（UP）和下轨线（DN）的计算。

日BOLL指标的计算公式

中轨线=N日的移动平均线

上轨线=中轨线＋两倍的标准差

下轨线=中轨线－两倍的标准差

from https://zhuanlan.zhihu.com/p/39845842
# 策略环境

交易标的：以太经典（ETC）
价差数据：ETC 当周 - ETC 季度（省略协整性检验）
交易周期：5 分钟
头寸匹配：1:1
交易类型：同品种跨期

# 策略逻辑

做多价差开仓条件：如果当前账户没有持仓，并且价差小于 boll 下轨，就做多价差。即：买开 ETC 当周，卖开 ETC 季度。
做空价差开仓条件：如果当前账户没有持仓，并且价差大于 boll 上轨，就做空价差。即：卖开 ETC 当周，买开 ETC 季度。
做多价差平仓条件：如果当前账户持有 ETC 当周多单，并且持有 ETC 季度空单，并且价差大于 boll 中轨，就平多价差。即：卖平 ETC 当周，买平 ETC 季度。
做空价差平仓条件：如果当前账户持有 ETC 当周空单，并且持有 ETC 季度多单，并且价差小于 boll 中轨，就平空价差。即：买平 ETC 当周，卖平 ETC 季度。